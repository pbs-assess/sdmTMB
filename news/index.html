<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • sdmTMB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sdmTMB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.9009</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic-intro.html">Introduction to modelling with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/bayesian.html">Bayesian estimation with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/cross-validation.html">Cross-validation for model evaluation and comparison</a></li>
    <li><a class="dropdown-item" href="../articles/delta-models.html">Fitting delta (hurdle) models with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/ggeffects.html">Visualizing marginal effects in sdmTMB models with ggeffects</a></li>
    <li><a class="dropdown-item" href="../articles/index-standardization.html">Index standardization with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/model-description.html">sdmTMB model description</a></li>
    <li><a class="dropdown-item" href="../articles/poisson-link.html">Poisson-link delta models</a></li>
    <li><a class="dropdown-item" href="../articles/pretty-plots.html">Making pretty maps with sdmTMB output</a></li>
    <li><a class="dropdown-item" href="../articles/residual-checking.html">Residual checking with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/spatial-trend-models.html">Fitting spatial trend models with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/threshold-models.html">Threshold modeling with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/visreg.html">Visualizing sdmTMB conditional effects using visreg</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pbs-assess/sdmTMB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/pbs-assess/sdmTMB/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="sdmtmb-development-version">sdmTMB (development version)<a class="anchor" aria-label="anchor" href="#sdmtmb-development-version"></a></h2>
<ul><li><p>Add progress bar to <code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/346" class="external-link">#346</a></p></li>
<li><p>Add AUC and TSS examples to cross validation vignette. <a href="https://github.com/pbs-assess/sdmTMB/issues/268" class="external-link">#268</a></p></li>
<li><p>Add <code>model</code> (linear predictor number) argument to coef() method. Also, write documentation for <code><a href="../reference/coef.sdmTMB.html">?coef.sdmTMB</a></code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/351" class="external-link">#351</a></p></li>
<li><p>Add helpful error message if some coordinates in make_mesh() are NA. <a href="https://github.com/pbs-assess/sdmTMB/issues/365" class="external-link">#365</a></p></li>
<li><p>Add informative message if fitting with an offset but predicting with offset argument left at NULL on newdata. <a href="https://github.com/pbs-assess/sdmTMB/issues/372" class="external-link">#372</a></p></li>
<li><p>Fix passing of <code>offset</code> argument through in <code><a href="../reference/sdmTMB_cv.html">sdmTMB_cv()</a></code>. Before it was being omitted in the prediction (i.e., set to 0). <a href="https://github.com/pbs-assess/sdmTMB/issues/372" class="external-link">#372</a></p></li>
<li><p>Fig bug in <code>exponentiate</code> argument for <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code>. Set <code>conf.int = TRUE</code> as default. <a href="https://github.com/pbs-assess/sdmTMB/issues/353" class="external-link">#353</a></p></li>
<li><p>Fix bug in prediction from <code><a href="../reference/families.html">delta_truncated_nbinom1()</a></code> and <code><a href="../reference/families.html">delta_truncated_nbinom2()</a></code> families. The positive component needs to be transformed to represent the mean of the <em>un</em>truncated distribution first before multiplying by the probability of a non-zero. Thanks to <a href="https://github.com/tom-peatman" class="external-link">@tom-peatman</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/350" class="external-link">#350</a></p></li>
<li><p>Add <code><a href="../reference/get_index.html">get_eao()</a></code> to calculate effective area occupied.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="sdmtmb-060">sdmTMB 0.6.0<a class="anchor" aria-label="anchor" href="#sdmtmb-060"></a></h2><p class="text-muted">CRAN release: 2024-05-29</p>
<ul><li><p>Pass several arguments to <code><a href="https://rdrr.io/pkg/DHARMa/man/plotQQunif.html" class="external-link">DHARMa::plotQQunif()</a></code>.</p></li>
<li><p>Add <code>silent</code> option in <code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code>. Setting it to <code>FALSE</code> allows monitoring simulations from larger models.</p></li>
<li>
<p>Fix bug in <code>est_non_rf1</code> and <code>est_non_rf2</code> columns when all the following conditions were true:</p>
<ul><li>predicting on new data</li>
<li>using a delta model</li>
<li>including IID random intercepts or time-varying coefficients See <a href="https://github.com/pbs-assess/sdmTMB/issues/342" class="external-link">#342</a>. Thanks to <a href="https://github.com/tom-peatman" class="external-link">@tom-peatman</a> for the issue report.</li>
</ul></li>
<li><p>Fix delta-gamma binomial link printing for <code>type = 'poisson-link'</code> <a href="https://github.com/pbs-assess/sdmTMB/issues/340" class="external-link">#340</a></p></li>
<li><p>Add suggestion to use an optimized BLAS library to README.</p></li>
<li><p>Add warning if it’s detected that there were problems reloading (e.g., with <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code>) a fitted model. Simultaneously revert the approach to how reloaded models are reattached.</p></li>
<li><p>Move <code>log_ratio_mix</code> parameter to 2nd phase with starting value of -1 instead of 0 to improve convergence.</p></li>
<li><p>Fix bugs for <code><a href="../reference/families.html">nbinom1()</a></code> and <code><a href="../reference/families.html">nbinom2_mix()</a></code> simulation.</p></li>
<li><p>Allow <code>profile</code> argument in the control list to take a character vector of parameters. This move these parameters from the outer optimization problem to the inner problem (but omits from the from the Laplace approximation). See documentation in TMB. This can considerably speed up fitting models with many fixed effects.</p></li>
<li><p>Add theoretical quantile residuals for the generalized gamma distribution. Thanks to J.C. Dunic. <a href="https://github.com/pbs-assess/sdmTMB/issues/333" class="external-link">#333</a></p></li>
<li><p>Add <code>"poisson-link"</code> option to delta-mixture lognormal.</p></li>
<li><p>Fix bug in simulation from Poisson-link delta models.</p></li>
<li><p>Simplify the internal treatment of extra time slices (<code>extra_time</code>). <a href="https://github.com/pbs-assess/sdmTMB/issues/329" class="external-link">#329</a> This is much less bug prone and also fixes a recently introduced bug. <a href="https://github.com/pbs-assess/sdmTMB/issues/335" class="external-link">#335</a> This can slightly affect model results compared to the previous approach if extra time was used along with smoothers since the ‘fake’ extra data previously used was included when mgcv determined knot locations for smoothers.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="sdmtmb-050">sdmTMB 0.5.0<a class="anchor" aria-label="anchor" href="#sdmtmb-050"></a></h2><p class="text-muted">CRAN release: 2024-04-03</p>
<ul><li><p>Overhaul residuals vignette (‘article’) <a href="https://pbs-assess.github.io/sdmTMB/articles/residual-checking.html" class="uri">https://pbs-assess.github.io/sdmTMB/articles/residual-checking.html</a> including brief intros to randomized quantile residuals, simulation-based residuals, ‘one-sample’ residuals, and uniform vs. Gaussian residuals.</p></li>
<li><p>Add check if prediction coordinates appear outside of fitted coordinates. <a href="https://github.com/pbs-assess/sdmTMB/issues/285" class="external-link">#285</a></p></li>
<li><p>Fix memory issue with Tweedie family on large datasets. <a href="https://github.com/pbs-assess/sdmTMB/issues/302" class="external-link">#302</a></p></li>
<li><p>Add experimental option to return standard normal residuals from <code><a href="../reference/dharma_residuals.html">dharma_residuals()</a></code>.</p></li>
<li><p>Make <code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code> not include <code>extra_time</code> elements.</p></li>
<li><p>Improved re-initialization of saved fitted model objects in new sessions.</p></li>
<li><p>Fix important bug in <code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code> method for delta families where the positive linear predictor was only getting simulated for observations present in the fitted data.</p></li>
<li><p>Add new <code>"mle-mvn"</code> type to <code><a href="../reference/residuals.sdmTMB.html">residuals.sdmTMB()</a></code> and make it the default. This is a fast option for evaluating goodness of fit that should be better than the previous default. See the details section in <code><a href="../reference/residuals.sdmTMB.html">?residuals.sdmTMB</a></code> for details. The previous default is now called <code>"mvn-eb"</code> but is not recommended.</p></li>
<li><p>Bring <code><a href="../reference/dharma_residuals.html">dharma_residuals()</a></code> back over from sdmTMBextra to sdmTMB. Add a new option in the <code>type</code> argument (<code>"mle-mvn"</code>) that should make the simulation residuals consistent with the expected distribution. See the same new documentation in <code><a href="../reference/residuals.sdmTMB.html">?residuals.sdmTMB</a></code>. The examples in <code><a href="../reference/dharma_residuals.html">?dharma_residuals</a></code> illustrate suggested use.</p></li>
<li><p>Fix bug in <code><a href="../reference/sanity.html">sanity()</a></code> where gradient checks were missing <code><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs()</a></code> such that large negative gradients weren’t getting caught. <a href="https://github.com/pbs-assess/sdmTMB/issues/324" class="external-link">#324</a></p></li>
<li><p>Return <code>offset</code> vector in fitted object as an element. Ensure any extra time rows of data in the <code>data</code> element of the fitted object do not include the extra time slices.</p></li>
<li><p>Add experimental residuals option “mle-mvn” where a single approximate posterior sample of the random effects is drawn and these are combined with the MLE fixed effects to produce residuals. This may become the default option.</p></li>
<li><p>Add the generalized gamma distribution (thanks to J.T. Thorson with additional work by J.C. Dunic.) See <code><a href="../reference/families.html">gengamma()</a></code>. This distribution is still in a testing phase and is not recommended for applied use yet. <a href="https://github.com/pbs-assess/sdmTMB/issues/286" class="external-link">#286</a></p></li>
<li><p>Detect possible issue with factor(time) in formula if same column name is used for <code>time</code> and <code>extra_time</code> is specified. <a href="https://github.com/pbs-assess/sdmTMB/issues/320" class="external-link">#320</a></p></li>
<li><p>Improve <code><a href="../reference/sanity.html">sanity()</a></code> check output when there are NA fixed effect standard errors.</p></li>
<li><p>Set <code>intern = FALSE</code> within index bias correction, which seems to be considerably faster when testing with most models.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.3" id="sdmtmb-043">sdmTMB 0.4.3<a class="anchor" aria-label="anchor" href="#sdmtmb-043"></a></h2><p class="text-muted">CRAN release: 2024-02-29</p>
<ul><li>
<p>Fix a bug likely introduced in July 2023 that caused issues when <code>extra_time</code> was specified. This is an important bug and models fit with <code>extra_time</code> between that date (if using the GitHub version) and v0.4.2.9004 (2024-02-24) should be checked against a current version of sdmTMB (v0.4.2.9005 or greater). On CRAN, this affected v0.4.0 (2023-10-20) to v0.4.2. Details:</p>
<ul><li>The essence of the bug was that <code>extra_time</code> works by padding the data with a fake row of data for every extra time element (using the first row of data as the template). This is supposed to then be omitted from the likelihood so it has no impact on model fitting beyond spacing time-series processes appropriately and setting up internal structures for forecasting. Unfortunately, a bug was introduced that caused these fake data (1 per extra time element) to be included in the likelihood.</li>
</ul></li>
<li><p>Issue error if <code>time</code> column has NAs. <a href="https://github.com/pbs-assess/sdmTMB/issues/298" class="external-link">#298</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/299" class="external-link">#299</a></p></li>
<li><p>Fix bug in <code>get_cog(..., format = "wide")</code> where the time column was hardcoded to <code>"year"</code> by accident.</p></li>
<li><p>Poisson-link delta models now use a <code>type</code> argument in <code><a href="../reference/families.html">delta_gamma()</a></code> and <code><a href="../reference/families.html">delta_lognormal()</a></code>. <code><a href="../reference/families.html">delta_poisson_link_gamma()</a></code> and <code><a href="../reference/families.html">delta_poisson_link_lognormal()</a></code> are deprecated. <a href="https://github.com/pbs-assess/sdmTMB/issues/290" class="external-link">#290</a></p></li>
<li><p>Delta families can now pass links that are different from the default <code>"logit"</code> and <code>"log"</code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/290" class="external-link">#290</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.2" id="sdmtmb-042">sdmTMB 0.4.2<a class="anchor" aria-label="anchor" href="#sdmtmb-042"></a></h2><p class="text-muted">CRAN release: 2024-01-18</p>
<ul><li><p>Force rebuild of CRAN binaries to fix issue with breaking Matrix ABI change causing <code>NaN gradient</code> errors. <a href="https://github.com/pbs-assess/sdmTMB/issues/288" class="external-link">#288</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/287" class="external-link">#287</a></p></li>
<li><p>Fix crash in if <code>sdmTMB(..., do_index = TRUE)</code> and <code>extra_time</code> supplied along with <code>predict_args = list(newdata = ...)</code> that lacked <code>extra_time</code> elements.</p></li>
<li><p>Allow <code><a href="../reference/get_index.html">get_index()</a></code> to work with missing time elements.</p></li>
<li><p>Add the ability to pass a custom randomized quantile function <code>qres_func</code> to <code><a href="../reference/residuals.sdmTMB.html">residuals.sdmTMB()</a></code>.</p></li>
<li><p>Add check for factor random intercept columns in <code>newdata</code> to avoid a crash. <a href="https://github.com/pbs-assess/sdmTMB/issues/278" class="external-link">#278</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/280" class="external-link">#280</a></p></li>
<li><p>Improve warnings/errors around use of <code>do_index = TRUE</code> and <code><a href="../reference/get_index.html">get_index()</a></code> if <code>newdata = NULL</code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/276" class="external-link">#276</a></p></li>
<li><p>Fix prediction with <code>offset</code> when <code>newdata</code> is <code>NULL</code> but <code>offset</code> is specified. <a href="https://github.com/pbs-assess/sdmTMB/issues/274" class="external-link">#274</a></p></li>
<li><p>Fix prediction failure when both <code>offset</code> and <code>nsim</code> are provided and model includes <code>extra_time</code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/273" class="external-link">#273</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.1" id="sdmtmb-041">sdmTMB 0.4.1<a class="anchor" aria-label="anchor" href="#sdmtmb-041"></a></h2><p class="text-muted">CRAN release: 2023-11-03</p>
<ul><li><p>Fix memory issues detected by CRAN ‘Additional issues’ clang-UBSAN, valgrind.</p></li>
<li><p>Fix a bug predicting on new data with a specified offset and <code>extra_time</code>. <a href="https://github.com/pbs-assess/sdmTMB/issues/270" class="external-link">#270</a></p></li>
<li><p>Add warning around non-factor handling of the <code>spatial_varying</code> formula. <a href="https://github.com/pbs-assess/sdmTMB/issues/269" class="external-link">#269</a></p></li>
<li><p>Add experimental <code><a href="../reference/set_delta_model.html">set_delta_model()</a></code> for plotting delta models with <code><a href="https://strengejacke.github.io/ggeffects/reference/ggpredict.html" class="external-link">ggeffects::ggpredict()</a></code> (GitHub version only until next CRAN version).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="sdmtmb-040">sdmTMB 0.4.0<a class="anchor" aria-label="anchor" href="#sdmtmb-040"></a></h2><p class="text-muted">CRAN release: 2023-10-20</p>
<ul><li><p>Move add_barrier_mesh() to sdmTMBextra to avoid final INLA dependency. <a href="https://github.com/pbs-assess/sdmTMBextra" class="external-link uri">https://github.com/pbs-assess/sdmTMBextra</a></p></li>
<li><p>Switch to using the new fmesher package for all mesh/SPDE calculations. INLA is no longer a dependency.</p></li>
<li><p>Switch to <code>diagonal.penalty = FALSE</code> in mgcv::smoothCon(). This changes the scale of the linear component of the smoother, but should result in the same model. <a href="https://github.com/glmmTMB/glmmTMB/issues/928#issuecomment-1642862066" class="external-link uri">https://github.com/glmmTMB/glmmTMB/issues/928#issuecomment-1642862066</a></p></li>
<li><p>Implement cross validation for delta models <a href="https://github.com/pbs-assess/sdmTMB/issues/239" class="external-link">#239</a></p></li>
<li><p>Remove ELPD from cross validation output. Use sum_loglik instead. <a href="https://github.com/pbs-assess/sdmTMB/issues/235" class="external-link">#235</a></p></li>
<li><p>Turn on Newton optimization by default. <a href="https://github.com/pbs-assess/sdmTMB/issues/182" class="external-link">#182</a></p></li>
<li><p>print() now checks sanity() and issues a warning if there may be issues. <a href="https://github.com/pbs-assess/sdmTMB/issues/176" class="external-link">#176</a></p></li>
<li><p>Poisson-link delta models and censored likelihood distributions have been made considerably more robust. <a href="https://github.com/pbs-assess/sdmTMB/issues/186" class="external-link">#186</a></p></li>
<li><p>Standard errors are now available on SD parameters etc. in tidy() <a href="https://github.com/pbs-assess/sdmTMB/issues/240" class="external-link">#240</a></p></li>
<li><p>Fix bug in print()/tidy() for delta-model positive model component sigma_E. A recently introduce bug was causing sigma_E for the 2nd model to be reported as the 1st model component sigma_E.</p></li>
<li><p>Add new anisotropy plotting function.</p></li>
<li><p>Add anisotropic range printing. <a href="https://github.com/pbs-assess/sdmTMB/issues/149" class="external-link">#149</a> by <a href="https://github.com/jdunic" class="external-link">@jdunic</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="sdmtmb-030">sdmTMB 0.3.0<a class="anchor" aria-label="anchor" href="#sdmtmb-030"></a></h2><p class="text-muted">CRAN release: 2023-01-28</p>
<ul><li><p>Create the sdmTMBextra package to remove rstan/tmbstan helpers, which were causing memory sanitizer errors on CRAN. <a href="https://github.com/pbs-assess/sdmTMBextra" class="external-link uri">https://github.com/pbs-assess/sdmTMBextra</a></p></li>
<li>
<p>The following functions are affected:</p>
<ul><li>
<code><a href="../reference/predict.sdmTMB.html">predict.sdmTMB()</a></code> now takes <code>mcmc_samples</code>, which is output from <code><a href="https://rdrr.io/pkg/sdmTMBextra/man/extract_mcmc.html" class="external-link">sdmTMBextra::extract_mcmc()</a></code>.</li>
<li>
<code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code> now takes <code>mcmc_samples</code>, which is output from <code><a href="https://rdrr.io/pkg/sdmTMBextra/man/extract_mcmc.html" class="external-link">sdmTMBextra::extract_mcmc()</a></code>.</li>
<li>
<code><a href="../reference/residuals.sdmTMB.html">residuals.sdmTMB()</a></code> now takes <code>mcmc_samples</code>, which is output <code><a href="https://rdrr.io/pkg/sdmTMBextra/man/predict_mle_mcmc.html" class="external-link">sdmTMBextra::predict_mle_mcmc()</a></code>. This only affects <code>residuals(..., type = "mle-mcmc")</code>.</li>
</ul></li>
<li><p>Move <code><a href="../reference/dharma_residuals.html">dharma_residuals()</a></code> to <a href="https://github.com/pbs-assess/sdmTMBextra" class="external-link">sdmTMBextra</a> to reduce heavy dependencies.</p></li>
<li><p>See examples in the Bayesian and residuals vignettes or in the help files for those functions within sdmTMBextra.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="sdmtmb-022">sdmTMB 0.2.2<a class="anchor" aria-label="anchor" href="#sdmtmb-022"></a></h2>
<ul><li><p>Various fixes to pass CRAN checks. <a href="https://github.com/pbs-assess/sdmTMB/issues/158" class="external-link">#158</a></p></li>
<li><p>Fix memory issue highlighted by Additional issues CRAN checks. <a href="https://github.com/pbs-assess/sdmTMB/issues/158" class="external-link">#158</a></p></li>
<li><p>‘offset’ argument can now be a character value indicating a column name. This is the preferred way of using an offset with parallel cross validation. <a href="https://github.com/pbs-assess/sdmTMB/issues/165" class="external-link">#165</a></p></li>
<li><p>Fix parallel cross validation when using an offset vector. <a href="https://github.com/pbs-assess/sdmTMB/issues/165" class="external-link">#165</a></p></li>
<li><p>Add leave-future-out cross validation functionality. <a href="https://github.com/pbs-assess/sdmTMB/issues/156" class="external-link">#156</a></p></li>
<li><p>Example data <code>qcs_grid</code> is no longer replicated by year to save package space. <a href="https://github.com/pbs-assess/sdmTMB/issues/158" class="external-link">#158</a></p></li>
<li><p>Add message with <code>tidy(fit, "ran_pars")</code> about why SEs are NA.</p></li>
<li><p>Add anisotropy to <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> <a href="https://github.com/pbs-assess/sdmTMB/issues/157" class="external-link">#157</a></p></li>
<li><p>Fix <code>predict(..., type = "response", se_fit = TRUE)</code>, which involves issuing a warning and sticking to link space. <a href="https://github.com/pbs-assess/sdmTMB/issues/140" class="external-link">#140</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="sdmtmb-021">sdmTMB 0.2.1<a class="anchor" aria-label="anchor" href="#sdmtmb-021"></a></h2><p class="text-muted">CRAN release: 2023-01-10</p>
<ul><li>Fixes for resubmission to CRAN.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="sdmtmb-020">sdmTMB 0.2.0<a class="anchor" aria-label="anchor" href="#sdmtmb-020"></a></h2>
<ul><li>Initial submission to CRAN.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="sdmtmb-014">sdmTMB 0.1.4<a class="anchor" aria-label="anchor" href="#sdmtmb-014"></a></h2>
<ul><li><p>Relax range parameter <code><a href="../reference/sanity.html">sanity()</a></code> check from 1x to 1.5x the greatest distance in the data.</p></li>
<li><p>Add Pearson residuals for several families. <code>residuals(fit, type = "pearson")</code> Useful for checking for overdispersion with N &gt; 1 binomial or Poisson families, among other uses. See the <code>overdisp_fun()</code> function at: <a href="https://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#testing-for-overdispersioncomputing-overdispersion-factor" class="external-link uri">https://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#testing-for-overdispersioncomputing-overdispersion-factor</a></p></li>
<li><p>Fix bug when using <code><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals()</a></code> or <code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate()</a></code> with binomial families specified via <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> or <code>weights = N</code>. The binomial sample size wasn’t being passed through typically resulting in Inf/-Inf.</p></li>
<li><p>Add mixture families: <code><a href="../reference/families.html">gamma_mix()</a></code>, <code><a href="../reference/families.html">lognormal_mix()</a></code> and associated delta/hurdle families: <code><a href="../reference/families.html">delta_gamma_mix()</a></code>, <code><a href="../reference/families.html">delta_lognormal_mix()</a></code>. These families feature a mixture of two distributions with different means but shared variance parameters.</p></li>
<li><p>Add <code><a href="../reference/families.html">delta_beta()</a></code> family.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="sdmtmb-013">sdmTMB 0.1.3<a class="anchor" aria-label="anchor" href="#sdmtmb-013"></a></h2>
<ul><li><p>Tweak <code><a href="../reference/sanity.html">sanity()</a></code> checking of standard error size.</p></li>
<li><p>Export previously experimental <code><a href="../reference/plot_anisotropy.html">plot_anisotropy()</a></code> function. The old function is now <code><a href="../reference/plot_anisotropy.html">plot_anisotropy2()</a></code>.</p></li>
<li><p>Allow passing offset data through <code><a href="../reference/predict.sdmTMB.html">predict.sdmTMB()</a></code> via <code>offset</code> argument.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="sdmtmb-012">sdmTMB 0.1.2<a class="anchor" aria-label="anchor" href="#sdmtmb-012"></a></h2>
<ul><li><p>Switch <code>effects = 'ran_vals'</code> for random intercept values from <code><a href="../reference/tidy.sdmTMB.html">tidy.sdmTMB()</a></code> to match the broom.mixed package.</p></li>
<li><p>Make <code><a href="../reference/tidy.sdmTMB.html">tidy.sdmTMB()</a></code> return a tibble if the tibble package is installed. Note this could affect old code since <code>drop = FALSE</code> is the default for tibbles but <code>drop = TRUE</code> is the default for data frames (i.e., tibbles always return a data frame when subsetted).</p></li>
<li><p>Fix longstanding issue with predicting on newdata with mgcv’s <code>t2()</code>. Previously this was disabled because of issues. It now works as expected.</p></li>
<li><p>Add <code>knots</code> argument in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>, which is passed to mgcv. A common use would be to specify end points in a cyclical spline (e.g., <code>s(x, bs = 'cc', k = 4), knots = list(x = c(1, 3, 5, 7))</code>) when the data don’t extend fully to the boundaries that should match up.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="sdmtmb-011">sdmTMB 0.1.1<a class="anchor" aria-label="anchor" href="#sdmtmb-011"></a></h2>
<ul><li><p>Preparing for release on CRAN.</p></li>
<li><p>Add time-varying AR1 option (originally was always a random walk). See <code>time_varying_type</code> argument in <code><a href="../reference/sdmTMB.html">?sdmTMB</a></code>.</p></li>
<li><p>Allow prediction on <code>newdata</code> with missing time elements. <a href="https://github.com/pbs-assess/sdmTMB/issues/130" class="external-link">#130</a></p></li>
<li><p>Add check for <code><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset()</a></code> (which <em>does not</em> work in sdmTMB, use the <code>offset</code> argument instead). <a href="https://github.com/pbs-assess/sdmTMB/issues/131" class="external-link">#131</a></p></li>
<li><p>Add check for random slopes (sdmTMB currently only does random intercepts, although slopes can vary spatially). <a href="https://github.com/pbs-assess/sdmTMB/issues/131" class="external-link">#131</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="sdmtmb-010">sdmTMB 0.1.0<a class="anchor" aria-label="anchor" href="#sdmtmb-010"></a></h2>
<ul><li><p>ADREPORT several parameters in natural space. <a href="https://github.com/pbs-assess/sdmTMB/discussions/113" class="external-link uri">https://github.com/pbs-assess/sdmTMB/discussions/113</a></p></li>
<li><p>Improve robustness of model <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> to more esoteric mgcv smoothers.</p></li>
<li><p>Let <code>sims_var</code> work with multiple spatially varying slopes (<code>zeta_s</code>); return output in named list by coefficients. <a href="https://github.com/pbs-assess/sdmTMB/issues/107" class="external-link">#107</a></p></li>
<li><p>Add <code>threshold_coefs</code> to <code><a href="../reference/sdmTMB_simulate.html">sdmTMB_simulate()</a></code>.</p></li>
<li><p>Don’t make a fake mesh for non-spatial model (faster).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.26.9001" id="sdmtmb-00269001">sdmTMB 0.0.26.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00269001"></a></h2>
<ul><li><p>Add vignettes on visreg, ggeffects, and delta families (thanks J. Indivero!) <a href="https://github.com/pbs-assess/sdmTMB/issues/83" class="external-link">#83</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/87" class="external-link">#87</a> <a href="https://github.com/pbs-assess/sdmTMB/issues/89" class="external-link">#89</a> Forecasting and presence-only vignettes to be merged in soon.</p></li>
<li><p>Add support for emmeans package. See <code><a href="../reference/emmeans.sdmTMB.html">?emmeans.sdmTMB</a></code> for examples.</p></li>
<li><p>Add support for effects package. The <code><a href="https://strengejacke.github.io/ggeffects/reference/ggpredict.html" class="external-link">ggeffects::ggeffect()</a></code> function can be used to make fast marginal effects plots. <code><a href="https://strengejacke.github.io/ggeffects/reference/ggpredict.html" class="external-link">ggeffects::ggpredict()</a></code> works with a custom fork of ggeffects. A pull request will be made shortly. <a href="https://github.com/pbs-assess/sdmTMB/issues/101" class="external-link">#101</a></p></li>
<li><p>Add <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code>, <code>fixef()</code>, <code>df.residual</code>(), <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula()</a></code>, <code><a href="https://rdrr.io/r/stats/terms.html" class="external-link">terms()</a></code>, and <code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">model.frame()</a></code> methods.</p></li>
<li><p>Add support for <code>"cloglog"</code> link. Code adapted from glmmTMB for robust likelihood implementation.</p></li>
<li><p>For delta models, by default share the anisotropy parameters as in VAST. Separate anisotropy (old behavior) can be estimated with <code>control = sdmTMBcontrol(map = list(ln_H_input = factor(c(1, 2, 3, 4))))</code></p></li>
<li><p>Add experimental <code>do_index</code>, <code>predict_args</code>, and <code>index_args</code> in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>. These can be used to perform prediction and index calculation at the same time as fitting. For very large datasets or meshes this can save time compared to fitting, predicting, and index calculation in 3 separate steps since the TMB AD object doesn’t have to be rebuilt. This will somewhat slow down the initial fitting.</p></li>
<li><p>Remove <code>max_gradient</code> and <code>bad_eig</code> from <code><a href="../reference/get_index.html">get_index()</a></code> output.</p></li>
<li><p>Use unique locations on prediction for huge speedups on large <code>newdata</code> gridded data.</p></li>
<li><p>Fix bug where in rare cases <code><a href="../reference/get_index.html">get_index()</a></code> would return gibberish small values.</p></li>
<li><p>Add <code>bayesian</code> argument, which when <code>TRUE</code> adds Jacobian adjustments for non-linear transformed parameters. This should be <code>TRUE</code> if the model will be passed to tmbstan, but <code>FALSE</code> otherwise. <a href="https://github.com/pbs-assess/sdmTMB/issues/95" class="external-link">#95</a></p></li>
<li><p>Add experimental and not-yet-exported <code>sdmTMB:::plot_anisotropy2()</code>.</p></li>
<li><p>Add many anisotropy, delta model, and index calculation unit tests.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.24.9001" id="sdmtmb-00249001">sdmTMB 0.0.24.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00249001"></a></h2>
<ul><li><p>Enable random walk random field TMB simulation in <code><a href="../reference/sdmTMB_simulate.html">sdmTMB_simulate()</a></code>.</p></li>
<li><p>Add check for irregular time with AR1 or random walk processes.</p></li>
<li><p>Fix bugs introduced by delta model code (offsets with <code>extra_time</code> and threshold model prediction).</p></li>
<li><p>Fix bug in <code><a href="../reference/sanity.html">sanity()</a></code> message with small random field SDs.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.24.9000" id="sdmtmb-00249000">sdmTMB 0.0.24.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00249000"></a></h2>
<ul><li><p>Add support for ‘delta’ (or ‘hurdle’) models. See examples and documentation in <code><a href="../reference/sdmTMB.html">?sdmTMB</a></code>. This has resulted in a substantial restructuring of the internal model code. By default both model components (e.g., binomial &amp; Gamma) share the same formula, spatial, and spatiotemporal structure, but these can be separated by supplying argument values in lists where the first element corresponds to the first model and the second element corresponds to the second model (with some limitations as described in <code><a href="../reference/sdmTMB.html">?sdmTMB</a></code> documentation ‘Details’).</p></li>
<li><p>Add support for multiple spatially varying coefficients (used to be limited to a single variable).</p></li>
<li><p>Add compatibility with the ‘visreg’ package for visualizing conditional effects of parameters. See <code><a href="../reference/visreg_delta.html">?visreg_delta</a></code> for examples.</p></li>
<li><p>Add MCMC residual type to <code><a href="../reference/residuals.sdmTMB.html">residuals.sdmTMB()</a></code>. These are a ‘better’ residuals but slower to calculate. See documentation ‘Details’ in <code><a href="../reference/residuals.sdmTMB.html">?residuals.sdmTMB</a></code>.</p></li>
<li><p>Make <code>offset</code> an argument in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>. Using the reserved word <code>offset</code> in the formula is now deprecated.</p></li>
<li><p>Add <code><a href="../reference/sanity.html">sanity()</a></code> function to perform some basic sanity checks on model fits.</p></li>
<li><p>Make an <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> model object compatible with <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> method.</p></li>
<li><p>Remove several deprecated arguments.</p></li>
<li><p>Overhaul examples in <code><a href="../reference/sdmTMB.html">?sdmTMB</a></code>.</p></li>
<li><p>Use faster “low-rank sparse hessian bias-correction” TMB bias correction.</p></li>
<li><p>Add parallel processing support. See <code>parallel</code> argument in <code>sdmTMBcontrol</code>. By default, grabs value of <code>sdmTMB.cores</code> option. E.g. <code>options(sdmTMB.cores = 4)</code>. Only currently enabled on Mac/Linux. Using too many cores can be much slower than 1 core.</p></li>
<li><p>Use ‘cli’ package <code>cli_abort()</code>/<code>cli_warn()</code>/<code>cli_inform()</code> over <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code>/<code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code>/<code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code>.</p></li>
<li><p>Add many unit tests.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.23.9000" id="sdmtmb-00239000">sdmTMB 0.0.23.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00239000"></a></h2>
<ul><li>A package version number that was used for internal testing in the ‘delta’ branch by several people.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.22.9001" id="sdmtmb-00229001">sdmTMB 0.0.22.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00229001"></a></h2>
<ul><li>Switch to TMBad library for ~3-fold speedup(!)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.22.9000" id="sdmtmb-00229000">sdmTMB 0.0.22.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00229000"></a></h2>
<ul><li>Fix bug in predictions with <code>poly(..., raw = FALSE)</code> on newdata. <a href="https://github.com/pbs-assess/sdmTMB/issues/77" class="external-link">#77</a></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.21.9009" id="sdmtmb-00219009">sdmTMB 0.0.21.9009<a class="anchor" aria-label="anchor" href="#sdmtmb-00219009"></a></h2>
<ul><li><p>Add experimental <code><a href="../reference/sdmTMB_stacking.html">sdmTMB_stacking()</a></code> for ensemble model stacking weights.</p></li>
<li><p>Add fake mesh if random fields are all off. <a href="https://github.com/pbs-assess/sdmTMB/issues/59" class="external-link">#59</a></p></li>
<li><p>Make <code>predict(..., newdata = NULL)</code> also use <code>last.par.best</code> instead of <code>last.par</code> to match <code>newdata = df</code>.</p></li>
<li><p>Fix bug in MVN fixed-effect prior indexing</p></li>
<li><p><code>sims</code> and <code>n_sims</code> arguments have been deprecated and standardized to <code>nsim</code> to match the <code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate()</a></code> S3 method.</p></li>
<li><p>Bias correction on <code><a href="../reference/get_index.html">get_index()</a></code> and <code><a href="../reference/get_index.html">get_cog()</a></code> is now selective and is just applied to the necessary derived parameters.</p></li>
<li><p>INLA projection matrix ‘A’ is now shared across spatial and spatiotemporal fields.</p></li>
<li><p>Add <code><a href="../reference/add_utm_columns.html">add_utm_columns()</a></code> to ease adding UTM columns.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.20.9001" id="sdmtmb-00209001">sdmTMB 0.0.20.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00209001"></a></h2>
<ul><li><p>Add <code><a href="../reference/dharma_residuals.html">dharma_residuals()</a></code>.</p></li>
<li><p>Fix bug in <code><a href="../reference/simulate.sdmTMB.html">simulate.sdmTMB()</a></code> and <code><a href="../reference/residuals.sdmTMB.html">residuals.sdmTMB()</a></code> for binomial family.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.20.9000" id="sdmtmb-00209000">sdmTMB 0.0.20.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00209000"></a></h2>
<ul><li><p>Smoothers now appear in <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> output. The format should roughly match brms. The main-effect component (e.g., <code>sdepth</code> for <code>s(depth)</code>) represents the linear component and the random effect (e.g., <code>sds(depth)</code>) component in the output corresponds to the standard deviation of the penalized weights.</p></li>
<li><p>Add <code>censored_poisson(link = 'log')</code> family; implemented by <a href="https://github.com/joenomiddlename" class="external-link">@joenomiddlename</a></p></li>
<li><p><code>fields</code> in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> is now deprecated and replaced by <code>spatiotemporal</code>.</p></li>
<li><p><code>include_spatial</code> in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> is now deprecated and replaced by <code>spatial</code>.</p></li>
<li><p><code>spatial_only</code> in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> is now deprecated and replaced by <code>spatiotemporal</code>. E.g. <code>spatial_only = TRUE</code> is now <code>spatiotemporal = 'off'</code> or leaving <code>time = NULL</code>.</p></li>
<li><p><code>spde</code> in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> is now deprecated and replaced by <code>mesh</code>.</p></li>
<li><p><code><a href="../reference/sdmTMB_simulate.html">sdmTMB_simulate()</a></code> is new and will likely replace <code>sdmTMB_sim()</code> eventually. <code><a href="../reference/sdmTMB_simulate.html">sdmTMB_simulate()</a></code> is set up to take a formula and a data frame and is easier to use if you want different spatial observations (and covariates) for each time slice. It can also take a fitted model and modify parts of it to simulate. Finally, this function uses TMB for simulation and so is much faster and more flexible in what it can simulate (e.g., anisotropy) than the previous version.</p></li>
<li><p><code>spatial_trend</code> is now <code>spatial_varying</code> and accepts a one-sided formula <em>with a single predictor</em> of any coefficient that should varying in space as a random field. Note that you may want to include a fixed effect for the same variable to improve interpretability. If the (scaled) time column is used, it will represent a local-time-trend model as before.</p></li>
<li><p>The Tweedie power (p) parameter is now in <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> output.</p></li>
<li><p><code>thetaf</code> is now <code>tweedie_p</code> in <code>sdmTMB_sim()</code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.19.9003" id="sdmtmb-00199003">sdmTMB 0.0.19.9003<a class="anchor" aria-label="anchor" href="#sdmtmb-00199003"></a></h2>
<ul><li>Fix bug affecting prediction with <code>se_fit = TRUE</code> for breakpoint models.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.19.9002" id="sdmtmb-00199002">sdmTMB 0.0.19.9002<a class="anchor" aria-label="anchor" href="#sdmtmb-00199002"></a></h2>
<ul><li>Simulation from the parameter covariance matrix works if random effects are turned off. <a href="https://github.com/pbs-assess/sdmTMB/issues/57" class="external-link">#57</a></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.19.9000" id="sdmtmb-00199000">sdmTMB 0.0.19.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00199000"></a></h2>
<ul><li>Smoothers <code>s()</code> are now <em>penalized</em> smoothers: they determine the degree of wiggliness (as in mgcv) and it is no longer necessary to choose an appropriate <code>k</code> value a priori. Models fit with previous versions of sdmTMB with <code>s(x, k = ...)</code> will not match models specified the same way in version &gt;= 0.0.19 since the basis functions are now penalized. All the various <code><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">mgcv::s()</a></code> options should be supported but <code>t2()</code> (and <code>ti()</code> and <code>te()</code>) are not supported.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.18.9001" id="sdmtmb-00189001">sdmTMB 0.0.18.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00189001"></a></h2>
<ul><li><p>Add ELPD (expected log predictive density) to <code><a href="../reference/sdmTMB_cv.html">sdmTMB_cv()</a></code> <a href="https://arxiv.org/abs/1507.04544" class="external-link uri">https://arxiv.org/abs/1507.04544</a></p></li>
<li><p>Fix bug evaluating <code>...</code> when <code><a href="../reference/sdmTMB_cv.html">sdmTMB_cv()</a></code> was called within a function. <a href="https://github.com/pbs-assess/sdmTMB/issues/54" class="external-link">#54</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.18.9000" id="sdmtmb-00189000">sdmTMB 0.0.18.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00189000"></a></h2>
<ul><li>Fix minor error in PC Matern prior</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.17.9000" id="sdmtmb-00179000">sdmTMB 0.0.17.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00179000"></a></h2>
<ul><li><p>Add random walk option: <code>fields = "RW"</code>.</p></li>
<li><p>Depreciate <code>ar1_fields</code> argument. See new <code>fields</code> argument in `sdmTMB().</p></li>
<li><p>Many packages moved from ‘Imports’ to ‘Suggests’</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.16.9000" id="sdmtmb-00169000">sdmTMB 0.0.16.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00169000"></a></h2>
<ul><li><p>Lower default <code><a href="https://rdrr.io/r/stats/nlminb.html" class="external-link">nlminb()</a></code> <code>eval.max</code> and <code>iter.max</code> to 1000 and 2000.</p></li>
<li><p>Added <code>profile</code> option in <code><a href="../reference/sdmTMBcontrol.html">sdmTMBcontrol()</a></code>. This can dramatically improve model fitting speed with many fixed effects. Note the result is likely to be slightly different with <code>TRUE</code> vs. <code>FALSE</code>.</p></li>
<li><p>Added simulation from the MVN precision matrix to <code><a href="../reference/predict.sdmTMB.html">predict.sdmTMB()</a></code>. See the <code>sims</code> argument.</p></li>
<li><p>Added <code><a href="../reference/gather_sims.html">gather_sims()</a></code> and <code><a href="../reference/gather_sims.html">spread_sims()</a></code> to extract parameter simulations from the joint precision matrix in a format that matches the tidybayes package.</p></li>
<li><p>Added <code><a href="../reference/get_index_sims.html">get_index_sims()</a></code> for a population index calculated from the MVN simulation draws.</p></li>
<li><p>Added <code><a href="../reference/extract_mcmc.html">extract_mcmc()</a></code> to extract MCMC samples if the model is passed to tmbstan.</p></li>
<li><p>Added the ability to predict from a model fitted with tmbstan. See the <code>tmbstan_model</code> argument in <code><a href="../reference/predict.sdmTMB.html">predict.sdmTMB()</a></code>.</p></li>
<li><p>Allowed for separate random field Matern range parameters for spatial and spatiotemporal fields. E.g. <code>sdmTMB(shared_range = FALSE)</code></p></li>
<li><p>Bounded the AR1 rho parameter between -0.999 and 0.999 to improve convergence; was -1 to 1. Please post an issue if this creates problems for your model.</p></li>
<li><p>Added <code>map</code>, <code>start</code>, <code>lower</code>, and <code>upper</code> options to control model fitting. See <code><a href="../reference/sdmTMBcontrol.html">sdmTMBcontrol()</a></code>.</p></li>
<li><p>Added priors for all parameters. See <code>?sdmTMB::priors</code> and the <code>priors</code> argument in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>. PC priors are available for the random fields. See <code><a href="../reference/priors.html">?pc_matern</a></code> and the details there.</p></li>
<li><p>Moved many less-common arguments from <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> to <code><a href="../reference/sdmTMBcontrol.html">sdmTMBcontrol()</a></code>.</p></li>
<li><p>Fix bug in <code><a href="../reference/sdmTMB_cv.html">sdmTMB_cv()</a></code> where fitting and testing data splits were reversed. I.e., the small chunk was fit; the big chunk was tested.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.15.9000" id="sdmtmb-00159000">sdmTMB 0.0.15.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00159000"></a></h2>
<ul><li><p>Added experimental penalized complexity (PC) prior as used in INLA. See arguments <code>matern_prior_O</code> and <code>matern_prior_E</code>.</p></li>
<li><p>Added back <code>normalize</code> argument to <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> and default to <code>FALSE</code>. Setting to <code>TRUE</code> can dramatically speed up some model fits (~4 times for some test models).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.14.9003" id="sdmtmb-00149003">sdmTMB 0.0.14.9003<a class="anchor" aria-label="anchor" href="#sdmtmb-00149003"></a></h2>
<ul><li>Added vignette on making pretty maps of the output</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.14.9001" id="sdmtmb-00149001">sdmTMB 0.0.14.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00149001"></a></h2>
<ul><li>Added some protections for possible user errors:
<ul><li>AR1 with a spatial-only model</li>
<li>Missing factor levels in time</li>
<li>Coordinate systems that are too big</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.14.9000" id="sdmtmb-00149000">sdmTMB 0.0.14.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00149000"></a></h2>
<ul><li><p>Add <code>re_form_iid</code> to <code><a href="../reference/predict.sdmTMB.html">predict.sdmTMB()</a></code>.</p></li>
<li><p>Add <code>map_rf</code> option to <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>. This lets you map (fix at their starting values of zero) all random fields to produce a classic GLM/GLMM.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.13.9000" id="sdmtmb-00139000">sdmTMB 0.0.13.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00139000"></a></h2>
<ul><li>Add IID random intercepts interface. E.g. <code>... + (1 | g)</code> <a href="https://github.com/pbs-assess/sdmTMB/issues/34" class="external-link">#34</a></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.12.9000" id="sdmtmb-00129000">sdmTMB 0.0.12.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00129000"></a></h2>
<ul><li>Add <code>epsilon_predictor</code> argument in <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code> to allow a model of the spatiotemporal variance through time.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.11.9000" id="sdmtmb-00119000">sdmTMB 0.0.11.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00119000"></a></h2>
<ul><li>Add <code>penalties</code> argument to allow for regularization.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.10.9001" id="sdmtmb-00109001">sdmTMB 0.0.10.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-00109001"></a></h2>
<ul><li>Fix Student-t degrees of freedom in the randomized quantile residuals</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.10.9000" id="sdmtmb-00109000">sdmTMB 0.0.10.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-00109000"></a></h2>
<ul><li><p>Fixed parameter initialization for inverse links <a href="https://github.com/pbs-assess/sdmTMB/issues/35" class="external-link">#35</a></p></li>
<li><p>Switched Gamma ‘phi’ parameter to representing shape instead of CV to match glm(), glmmTMB(), etc.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.9.9000" id="sdmtmb-0099000">sdmTMB 0.0.9.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-0099000"></a></h2>
<ul><li>Switched the density/abundance index calculation to use the link function as opposed to a hardcoded log() so that the <code>get_generic()</code> function can be used to grab things like standardized average values of the response across a grid. What used to be <code>log_total</code> in the raw TMB output is now <code>link_total</code> but most users you shouldn’t notice any difference.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.8.9000" id="sdmtmb-0089000">sdmTMB 0.0.8.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-0089000"></a></h2>
<ul><li><p>Overhauled the simulation function. The function is now called <code>sdmTMB_sim()</code> and uses INLA functions instead of RandomFields functions for simulating the random fields.</p></li>
<li><p>The simulation function can now accommodate all families and links and takes an INLA mesh as input.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.7.9001" id="sdmtmb-0079001">sdmTMB 0.0.7.9001<a class="anchor" aria-label="anchor" href="#sdmtmb-0079001"></a></h2>
<ul><li>Allow specifying degrees of freedom in the Student-t family <a href="https://github.com/pbs-assess/sdmTMB/issues/29" class="external-link">#29</a></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.7.9000" id="sdmtmb-0079000">sdmTMB 0.0.7.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-0079000"></a></h2>
<ul><li><p>Added a <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> method (from broom and broom.mixed) to return a data frame of parameter estimates. The function can extract the fixed effects or the random effect parameters (variances, AR1 correlation, spatial range).</p></li>
<li><p>Added an argument <code>extra_time</code> to <code><a href="../reference/sdmTMB.html">sdmTMB()</a></code>. This introduces additional time slices that you can then predict on if you want to interpolate or forecast. Internally, it uses Eric Ward’s ‘weights hack’. This is also useful if you have data unevenly spaced in time and you want the gaps evenly spaced for a random walk or AR1 process (add any missing years to <code>extra_time</code>).</p></li>
<li><p><code>make_spde()</code> is now replaced with <code><a href="../reference/make_mesh.html">make_mesh()</a></code> and <code>make_spde()</code> has been soft deprecated. <code><a href="../reference/make_mesh.html">make_mesh()</a></code> carries through the x and y column names to the predict function and is more in line with the tidyverse style of taking a data frame first.</p></li>
<li><p><code><a href="../reference/make_mesh.html">make_mesh()</a></code> can accept <code>cutoff</code> as an argument (as in INLA), which is likely a better default way to specify the mesh since it scales across regions better and is line with the literature on INLA.</p></li>
<li><p><code><a href="../reference/make_mesh.html">make_mesh()</a></code> can use a binary search algorithm to find a cutoff that best matches a desired number of knots (thanks to Kelli Johnson for the idea).</p></li>
<li><p>Barrier meshes are now possible. See <code><a href="../reference/add_barrier_mesh.html">add_barrier_mesh()</a></code> for an example.</p></li>
<li><p>There is a pkgdown website now that gets auto generated with GitHub actions.</p></li>
<li><p>There is the start of a model description vignette. It is very much a work in progress.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6.9009" id="sdmtmb-0069009">sdmTMB 0.0.6.9009<a class="anchor" aria-label="anchor" href="#sdmtmb-0069009"></a></h2>
<ul><li>Fixed bug in dlnorm</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6.9005" id="sdmtmb-0069005">sdmTMB 0.0.6.9005<a class="anchor" aria-label="anchor" href="#sdmtmb-0069005"></a></h2>
<ul><li>Fixed bug in predictions with standard errors where one(?) parameter (a breakpoint parameter) would be passed in at its initial instead of MLE value.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6.9004" id="sdmtmb-0069004">sdmTMB 0.0.6.9004<a class="anchor" aria-label="anchor" href="#sdmtmb-0069004"></a></h2>
<ul><li><p>Fixed bug with predictions on new data in models with break points</p></li>
<li>
<p>Overhauled cross validation function. The function now:</p>
<ul><li>uses Eric’s weights hack so it can also be used for forecasting</li>
<li>initializes subsequent folds at the MLE of the first fold for considerable speed increases</li>
<li>works in parallel if a future plan initialized; see examples</li>
</ul></li>
<li><p>Added threshold parameters to the print method</p></li>
<li><p>Added forecasting example with the weights hack</p></li>
<li><p>Fixed bug in linear break point models</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6.9002" id="sdmtmb-0069002">sdmTMB 0.0.6.9002<a class="anchor" aria-label="anchor" href="#sdmtmb-0069002"></a></h2>
<ul><li><p>Fixed GAM predictions with all 0s in new data.</p></li>
<li><p>Add linear and logistic threshold models. <a href="https://github.com/pbs-assess/sdmTMB/issues/17" class="external-link">#17</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.5.9000" id="sdmtmb-0059000">sdmTMB 0.0.5.9000<a class="anchor" aria-label="anchor" href="#sdmtmb-0059000"></a></h2>
<ul><li><p>Added parsing of mgcv formulas for splines. <a href="https://github.com/pbs-assess/sdmTMB/issues/16" class="external-link">#16</a></p></li>
<li><p>Added ability to predict with standard errors at the population level. This helps with making marginal-effect plots. <a href="https://github.com/pbs-assess/sdmTMB/issues/15" class="external-link">#15</a></p></li>
<li><p>Added optimization options to aid convergence. Also added <code><a href="../reference/run_extra_optimization.html">run_extra_optimization()</a></code> to run these on already fit models. Default is for no extra optimization.</p></li>
<li><p>Added binomial likelihood to cross validation. Git hash <code>ee3f3ba</code>.</p></li>
<li><p>Started keeping track of news in <code>NEWS.md</code>.</p></li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean C. Anderson, Eric J. Ward, Philina A. English, Lewis A. K. Barnett, James T. Thorson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

