<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Spatial Modeling of Presence-Only Data with sdmTMB • sdmTMB</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatial Modeling of Presence-Only Data with sdmTMB">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sdmTMB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.2.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/basic-intro.html">Introduction to modelling with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/bayesian.html">Bayesian estimation with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/cross-validation.html">Cross-validation for model evaluation and comparison</a></li>
    <li><a class="dropdown-item" href="../articles/delta-models.html">Fitting delta (hurdle) models with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/forecasting.html">Forecasting with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/ggeffects.html">Visualizing marginal effects in sdmTMB models with ggeffects</a></li>
    <li><a class="dropdown-item" href="../articles/index-standardization.html">Index standardization with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/model-description.html">sdmTMB model description</a></li>
    <li><a class="dropdown-item" href="../articles/multispecies.html">Fitting multispecies models with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/poisson-link.html">Poisson-link delta models</a></li>
    <li><a class="dropdown-item" href="../articles/presence-only.html">Spatial Modeling of Presence-Only Data with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/pretty-plots.html">Making pretty maps with sdmTMB output</a></li>
    <li><a class="dropdown-item" href="../articles/residual-checking.html">Residual checking with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/spatial-trend-models.html">Fitting spatial trend models with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/threshold-models.html">Threshold modeling with sdmTMB</a></li>
    <li><a class="dropdown-item" href="../articles/visreg.html">Visualizing sdmTMB conditional effects using visreg</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pbs-assess/sdmTMB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spatial Modeling of Presence-Only Data with sdmTMB</h1>
                        <h4 data-toc-skip class="author">Julia Indivero,
Sean Anderson, Lewis Barnett, Philina English, Eric Ward, Jim
Thorson</h4>
            
            <h4 data-toc-skip class="date">2025-06-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pbs-assess/sdmTMB/blob/main/vignettes/articles/presence-only.Rmd" class="external-link"><code>vignettes/articles/presence-only.Rmd</code></a></small>
      <div class="d-none name"><code>presence-only.Rmd</code></div>
    </div>

    
    
<p>While some geostatistical datasets contain information on presences
and absences of species, others only include only locations where
presence is observed. While presence-only modelling is commonly used in
ecology and fisheries, there are also applications in other fields
(e.g. dynamics of rare diseases). There are several approaches for
analyzing these types of data—we illustrate two applications below, and
in both utilize simulated zeros (pseudo-absences).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pbs-assess.github.io/sdmTMB/">sdmTMB</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://spatstat.org/" class="external-link">spatstat.data</a></span><span class="op">)</span></span></code></pre></div>
<p>By adding pseudo-absences to presence-only data, we can estimate a
spatial range that isn’t sensitive to choice of raster or lattice
resolution.</p>
<p>As an example dataset, we will use data on the locations of 3605
trees (species <em>Beilschmiedia pendula</em>) in a tropical rainforest
from <a href="https://rdrr.io/cran/spatstat.data/man/bei.html" class="external-link">the
spatst.data package</a></p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="section level3">
<h3 id="presence-data">Presence data<a class="anchor" aria-label="anchor" href="#presence-data"></a>
</h3>
<p>These data come from the <code>spatstat</code> package, and consist
of point locations of 3605 trees on Barro Colorado Island (Panama). From
<code>spatstat</code>, <em>the data files kindly supplied by Rasmus
Waagepetersen</em></p>
<p>The data are stored in the <code>bei</code> dataframe,</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">spatstat.data</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/spatstat.data/man/bei.html" class="external-link">bei</a></span><span class="op">$</span><span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="fu">spatstat.data</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/spatstat.data/man/bei.html" class="external-link">bei</a></span><span class="op">$</span><span class="va">y</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The distribution of trees is obviously not uniform and the middle of
the map has very few trees.</p>
<p><img src="presence-only_files/figure-html/plot-trees-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="generate-pseudo-absences">Generate pseudo-absences<a class="anchor" aria-label="anchor" href="#generate-pseudo-absences"></a>
</h3>
<p>There are several approaches to generating pseudo-absences from these
data. We first use a method called quadrature points (<a href="https://doi.org/10.1111/2041-210X.12352" class="external-link">Renner et al. 2015</a>).
For this method, we have to decide:</p>
<ol style="list-style-type: decimal">
<li>Distribution of zeroes<br>
</li>
</ol>
<ul>
<li>Regularly spaced (e.g. on a grid or lattice?)</li>
<li>Random<br>
</li>
<li>Higher density where environmental variability is high (suggestion
by Renner et al. 2015)</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>How many zeroes to generate?<br>
</li>
</ol>
<ul>
<li>Large enough so that predictive performance does not change as more
are added</li>
</ul>
<p>Here, we will use a uniform grid strategy to create ~5000 points. To
test whether the number of pseudo-absences is sufficient,
<code>res</code> can be decreased, and model performance can be
compared. For instance, to increase the number of pseudo-absences to
~20,000 points, we could change <code>res &lt;- 5</code>. In this
example, increasing the number of zeroes to ~20,000 only marginally
improves model performance, so 5,000 zeroes is sufficient.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fl">10</span> <span class="co"># Determines resolution: lower value will increase number of zeroes generated</span></span>
<span></span>
<span><span class="co"># zeros is generated on a grid for this example, but other strategies could be used</span></span>
<span><span class="va">zeros</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1000</span>, by <span class="op">=</span> <span class="va">res</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">500</span>, by <span class="op">=</span> <span class="va">res</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then, we combine the presence and pseudo-absence data, and use
<code>$present</code> to separate occurrences from pseudo-absences.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span><span class="op">$</span><span class="va">present</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">zeros</span><span class="op">$</span><span class="va">present</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">all_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">zeros</span><span class="op">)</span></span></code></pre></div>
<p>Next we can create the mesh. The resolution of mesh can be changed
with the <code>cutoff</code> value, which determines the minimum
distance between locations in X-Y units. Increasing the cutoff will
decrease the resolution of the mesh. In this example, a higher
resolution mesh of <code>cutoff=15</code> marginally improved model
performance over <code>cutoff=25</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mesh</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_mesh.html">make_mesh</a></span><span class="op">(</span></span>
<span>  <span class="va">all_dat</span>,</span>
<span>  xy_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">15</span> <span class="co"># min. distance between knots in X-Y units</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The dimensions of the mesh (or number of vertices or knots) can be
accessed with <code>mesh$mesh$n</code>. A cutoff distance of 15 yields ~
1399 knots, and a cutoff distance of 25 yields a mesh with 624
knots.</p>
<p>In the following plot, blue dots are data and red grid dots are
quadrature points.</p>
<p><img src="presence-only_files/figure-html/mesh-viz-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="model-options">Model Options<a class="anchor" aria-label="anchor" href="#model-options"></a>
</h2>
<div class="section level3">
<h3 id="infinitely-weighted-logistic-regression-iwlr-and-sdmtmb">1) Infinitely Weighted Logistic Regression (IWLR) and sdmTMB<a class="anchor" aria-label="anchor" href="#infinitely-weighted-logistic-regression-iwlr-and-sdmtmb"></a>
</h3>
<p>Several approaches exist for estimating a model with pseudo-absences.
These are similar, but have different likelihood models. First, we can
use an Infinitely Weighted Logistic Regression <a href="https://doi.org/10.1214/13-AOAS667" class="external-link">Fithian &amp; Hastie
(2013)</a> for the model.</p>
<p>The first step is to calculate weights. Weights will be 1 for true
occurrences and a very large number (<code>nW</code>) for
pseudo-absences.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nW</span> <span class="op">&lt;-</span> <span class="fl">1.0e6</span></span>
<span><span class="va">all_dat</span><span class="op">$</span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="va">nW</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">all_dat</span><span class="op">$</span><span class="va">present</span><span class="op">)</span></span></code></pre></div>
<p>And use sdmTMB to fit the model.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sdmTMB.html">sdmTMB</a></span><span class="op">(</span></span>
<span>  <span class="va">present</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">all_dat</span>,</span>
<span>  mesh <span class="op">=</span> <span class="va">mesh</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span>,</span>
<span>  weights <span class="op">=</span> <span class="va">all_dat</span><span class="op">$</span><span class="va">wt</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can inspect the model output.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; Spatial model fit by ML ['sdmTMB']</span></span>
<span><span class="co">#&gt; Formula: present ~ 1</span></span>
<span><span class="co">#&gt; Mesh: mesh (isotropic covariance)</span></span>
<span><span class="co">#&gt; Data: all_dat</span></span>
<span><span class="co">#&gt; Family: binomial(link = 'logit')</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt; Conditional model:</span></span>
<span><span class="co">#&gt;             coef.est coef.se</span></span>
<span><span class="co">#&gt; (Intercept)    -15.5    0.17</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matérn range: 57.49</span></span>
<span><span class="co">#&gt; Spatial SD: 1.73</span></span>
<span><span class="co">#&gt; ML criterion at convergence: 52267.406</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; See ?tidy.sdmTMB to extract these values as a data frame.</span></span></code></pre></div>
<p>A criticism of this approach is that the intercept and log-likelihood
can be affected by <code>nW</code> (<a href="https://doi.org/10.1111/2041-210X.12352" class="external-link">Renner et
al. 2015</a>)</p>
</div>
<div class="section level3">
<h3 id="downweighted-poisson-regression-dwpr">2) Downweighted Poisson Regression (DWPR)<a class="anchor" aria-label="anchor" href="#downweighted-poisson-regression-dwpr"></a>
</h3>
<p>Another option is the Downweighted Poisson Regression, which is
similar to IWLR but uses different weights and doesn’t have the same
arbitrary effects on intercept and likelihood</p>
<p>First we re-calculate weights (note they’re different than IWLR):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># small values at presence locations</span></span>
<span><span class="va">all_dat</span><span class="op">$</span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fl">1e-6</span></span>
<span></span>
<span><span class="co"># pseudo-absences: area per quadrature point</span></span>
<span><span class="va">tot_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">n_zeros</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">all_dat</span><span class="op">$</span><span class="va">present</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_dat</span><span class="op">$</span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">all_dat</span><span class="op">$</span><span class="va">present</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>  <span class="fl">1e-6</span>, <span class="va">tot_area</span> <span class="op">/</span> <span class="va">n_zeros</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then fit the model with the new weights and a Poisson
distribution</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sdmTMB.html">sdmTMB</a></span><span class="op">(</span></span>
<span>  <span class="va">present</span> <span class="op">/</span> <span class="va">wt</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">all_dat</span>,</span>
<span>  mesh <span class="op">=</span> <span class="va">mesh</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>,</span>
<span>  weights <span class="op">=</span> <span class="va">all_dat</span><span class="op">$</span><span class="va">wt</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>And inspect the output</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; Spatial model fit by ML ['sdmTMB']</span></span>
<span><span class="co">#&gt; Formula: present/wt ~ 1</span></span>
<span><span class="co">#&gt; Mesh: mesh (isotropic covariance)</span></span>
<span><span class="co">#&gt; Data: all_dat</span></span>
<span><span class="co">#&gt; Family: poisson(link = 'log')</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt; Conditional model:</span></span>
<span><span class="co">#&gt;             coef.est coef.se</span></span>
<span><span class="co">#&gt; (Intercept)    -6.26    0.17</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matérn range: 57.49</span></span>
<span><span class="co">#&gt; Spatial SD: 1.73</span></span>
<span><span class="co">#&gt; ML criterion at convergence: 65147.461</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; See ?tidy.sdmTMB to extract these values as a data frame.</span></span></code></pre></div>
<p>We can plot the random spatial effects</p>
<p><img src="presence-only_files/figure-html/plot-rf-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We can predict spatial distribution both in link (log) space:</p>
<p><img src="presence-only_files/figure-html/plot-link-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Or natural space:</p>
<p><img src="presence-only_files/figure-html/plot-norm-1.png" width="672" style="display: block; margin: auto;"></p>
<p>To evaluate the predictive performance, there are multiple options
for binary data. AUC (Area Under the receiver operating characteristic
curve) is a common metric, where values near 0.5 are essentially random,
and values close to 1 indicate better predictive performance. We can use
the package <a href="https://cran.rstudio.com/web/packages/ROCR/vignettes/ROCR.html" class="external-link">ROCR</a>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_dat</span><span class="op">$</span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">est</span> <span class="co"># total predictions, logit</span></span>
<span><span class="va">rocr</span> <span class="op">&lt;-</span> <span class="fu">ROCR</span><span class="fu">::</span><span class="fu">prediction</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">all_dat</span><span class="op">$</span><span class="va">p</span><span class="op">)</span>, <span class="va">all_dat</span><span class="op">$</span><span class="va">present</span><span class="op">)</span></span>
<span><span class="fu">ROCR</span><span class="fu">::</span><span class="fu">performance</span><span class="op">(</span><span class="va">rocr</span>, measure <span class="op">=</span> <span class="st">"auc"</span><span class="op">)</span><span class="op">@</span><span class="va">y.values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean C. Anderson, Eric J. Ward, Philina A. English, Lewis A. K. Barnett, James T. Thorson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
